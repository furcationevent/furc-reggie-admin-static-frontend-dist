var et=Object.defineProperty,tt=Object.defineProperties;var nt=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var at=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable;var Oe=(t,r,a)=>r in t?et(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,N=(t,r)=>{for(var a in r||(r={}))at.call(r,a)&&Oe(t,a,r[a]);if(Ie)for(var a of Ie(r))rt.call(r,a)&&Oe(t,a,r[a]);return t},$=(t,r)=>tt(t,nt(r));import{u as ot,a as it,s as Ae,M as lt,c as st,r as u,j as o,T as ct,b as e,C as dt,B as ut,d as ht,I as he,e as mt,f as le,D as gt,g as pt,h as ft,i as Ct,L as ge,k as te,l as _t,m as ne,n as xe,o as we,p as Ee,q as Re,t as vt,v as k,w as Fe,x as bt,y as yt,z as St,F as I,A as se,P as xt,S as M,E as x,G as q,H as B,J as D,K as R,N as F,O as U,Q as L,R as S,U as Ke,V as ze,W as Me,X as ae,Y as re,Z as H,_ as ke,$ as ue,a0 as wt,a1 as _e,a2 as Y,a3 as He,a4 as oe,a5 as ie,a6 as X,a7 as qe,a8 as Be,a9 as kt,aa as At,ab as Ne,ac as De,ad as Tt,ae as It,af as Ot,ag as Et,ah as Nt,ai as J}from"./vendor.3962a6c3.js";const Dt=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))p(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const g of s.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&p(g)}).observe(document,{childList:!0,subtree:!0});function a(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function p(n){if(n.ep)return;n.ep=!0;const s=a(n);fetch(n.href,s)}};Dt();const z=()=>ot(),ee=it,me=240,Pt=Ae("main",{shouldForwardProp:t=>t!=="open"})(({theme:t,open:r})=>N({flexGrow:1,padding:t.spacing(3),transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:`-${me}px`},r&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0})),jt=Ae(lt,{shouldForwardProp:t=>t!=="open"})(({theme:t,open:r})=>N({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},r&&{width:`calc(100% - ${me}px)`,marginLeft:`${me}px`,transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})),Pe=Ae("div")(({theme:t})=>$(N({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{justifyContent:"flex-end"}));function Lt(t){const r=z(),a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,p=st({palette:{mode:a?"dark":"light"}}),[n,s]=u.exports.useState(!0),g=ee(w=>w.user.authed),m=localStorage.getItem("ROLE"),b=()=>{s(!0)},f=()=>{s(!1)};let h;g?m=="admin"?h={"/":{label:"Intro",icon:e(xe,{})},"/accommodation":{label:"Accommodation",icon:e(we,{})},"/attendees":{label:"Attendees",icon:e(Ee,{})},"/groups":{label:"Groups",icon:e(Re,{})},"/config":{label:"Config",icon:e(vt,{})}}:h={"/":{label:"Intro",icon:e(xe,{})},"/welfare":{label:"Welfare",icon:e(Ee,{})}}:h={"/":{label:"Intro",icon:e(xe,{})}};const y="/"+window.location.pathname.split("/")[1],[E,O]=u.exports.useState(h[y].label),C=w=>{const d=h[w];O(d.label),r(k(w))};return o(ct,{theme:p,children:[e(dt,{}),o(ut,{sx:{display:"flex"},children:[e(jt,{position:"fixed",open:n,children:o(ht,{children:[e(he,{color:"inherit","aria-label":"open drawer",onClick:b,edge:"start",sx:N({mr:2},n&&{display:"none"}),children:e(mt,{})}),e(le,{variant:"h6",noWrap:!0,component:"div",children:E})]})}),o(gt,{sx:{width:me,flexShrink:0,"& .MuiDrawer-paper":{width:me,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:n,children:[e(Pe,{children:e(he,{onClick:f,children:p.direction==="ltr"?e(pt,{}):e(ft,{})})}),e(Ct,{}),e(ge,{children:Object.keys(h).map(w=>o(te,{button:!0,onClick:()=>C(w),children:[e(_t,{children:h[w].icon}),e(ne,{primary:h[w].label})]},w))})]}),o(Pt,{open:n,children:[e(Pe,{}),t.children]})]})]})}const Gt={authed:!!localStorage.getItem("TOKEN")},Ue=Fe({name:"user",initialState:Gt,reducers:{login(t){t.authed=!0},logout(t){t.authed=!1}}}),{login:Wt,logout:K}=Ue.actions;var Rt=Ue.reducer;const Ft={config:{}},$e=Fe({name:"config",initialState:Ft,reducers:{setConfig(t,r){t.config=r.payload}}}),{setConfig:Kt}=$e.actions;var zt=$e.reducer;const{createReduxHistory:Mt,routerMiddleware:Ht,routerReducer:qt}=bt({history:yt()}),Te=St({reducer:{router:qt,user:Rt,config:zt},middleware:[Ht]}),Bt=Mt(Te),P=window.location.hostname=="localhost"?"http://localhost:8000/":"https://api.reg.furcation.org.uk/",Ut=window.location.protocol+"//"+window.location.host;function $t(){return fetch(P+"auth/o/keycloak/?"+new URLSearchParams({redirect_uri:Ut}),{method:"GET",credentials:"include"})}function Jt(t,r){return fetch(P+"auth/o/keycloak/",{method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({state:t,code:r})})}function Je(){return fetch(P+"auth/users/",{method:"GET",credentials:"include",headers:{Authorization:"Token "+localStorage.getItem("TOKEN")}})}function Ye(t){return fetch(P+"auth/users/"+t,{method:"GET",credentials:"include",headers:{Authorization:"Token "+localStorage.getItem("TOKEN")}})}function Yt(t){return fetch(P+"auth/users/"+t.id+"/",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Token "+localStorage.getItem("TOKEN")},body:JSON.stringify(t)})}function Ve(){return fetch(P+"accommodation/",{method:"GET",credentials:"include",headers:{Authorization:"Token "+localStorage.getItem("TOKEN")}})}function Vt(t){return fetch(P+"accommodation/"+t+"/",{method:"GET",credentials:"include",headers:{Authorization:"Token "+localStorage.getItem("TOKEN")}})}function Xt(t){return fetch(P+"accommodation/",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Token "+localStorage.getItem("TOKEN")},body:JSON.stringify(t)})}function Zt(t){return fetch(P+"accommodation/"+t.id+"/",{method:"DELETE",credentials:"include",headers:{Authorization:"Token "+localStorage.getItem("TOKEN")}})}function Qt(t){return fetch(P+"accommodation/"+t.id+"/",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Token "+localStorage.getItem("TOKEN")},body:JSON.stringify(t)})}function Xe(){return fetch(P+"groups/",{method:"GET",credentials:"include",headers:{Authorization:"Token "+localStorage.getItem("TOKEN")}})}function Ce(t){return fetch(P+"groups/"+t+"/",{method:"GET",credentials:"include",headers:{Authorization:"Token "+localStorage.getItem("TOKEN")}})}function en(t){return fetch(P+"groups/"+t.id+"/",{method:"DELETE",credentials:"include",headers:{Authorization:"Token "+localStorage.getItem("TOKEN")}})}function tn(t){return fetch(P+"auth/users/"+t.id+"/",{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Token "+localStorage.getItem("TOKEN")}})}function nn(t,r){return fetch(P+"groups/"+t.id+"/",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Token "+localStorage.getItem("TOKEN")},body:JSON.stringify({owner:{id:r,nickname:""}})})}function de(t){return fetch(P+"groups/"+t.id+"/",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Token "+localStorage.getItem("TOKEN")},body:JSON.stringify(t)})}function Ze(){return fetch(P+"config/",{method:"GET",credentials:"include",headers:{Authorization:"Token "+localStorage.getItem("TOKEN")}})}function an(t){return fetch(P+"config/"+t.id+"/",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Token "+localStorage.getItem("TOKEN")},body:JSON.stringify({value:t.value})})}function rn(){const t=z(),r=ee(g=>g.user.authed),[a,p]=u.exports.useState("");return u.exports.useEffect(()=>{const g=new URLSearchParams(window.location.search),m=g.get("state"),b=g.get("code");!r&&m&&b&&Jt(m,b).then(f=>{f.status==201?f.json().then(h=>{localStorage.setItem("TOKEN",h.access),localStorage.setItem("ROLE",h.user),t(Wt())}):f.json().then(h=>{p("Login flow expired, please login again."),console.log(h)})})},[]),o(I,{children:[a?e(se,{severity:"error",children:a}):null,o(xt,{variant:"outlined",sx:{my:{xs:3,md:6},p:{xs:2,md:3}},children:[e(le,{variant:"h6",color:"inherit",children:"Welcome to Furcation Registation Admin Panel"}),o(le,{variant:"body1",color:"inherit",paragraph:!0,children:["Welcome to the admin panel here you can view and edit attendees and groups for maintainance or resolving issues. For any issues please contact us:",e("br",{}),e("br",{}),"Registration - reg@furcation.org.uk",e("br",{}),"IT - it@furcation.org.uk"]}),r?e(M,{spacing:2,alignItems:"center",children:e(x,{color:"error",variant:"contained",sx:{minWidth:{sm:400,xs:"100%"}},onClick:()=>{t(K()),localStorage.removeItem("TOKEN")},children:"Logout"})}):e(M,{spacing:2,alignItems:"center",children:e(x,{variant:"contained",sx:{minWidth:{sm:400,xs:"100%"}},onClick:()=>{$t().then(g=>{g.status==200?g.json().then(m=>{window.location.href=m.authorization_url}):g.json().then(m=>{p("Error while contacting Keycloak, please try again or contact tech."),console.log(m)})})},children:"Login with Keycloak"})})]})]})}function on(t){const r=z(),[a,p]=u.exports.useState([]),[n,s]=u.exports.useState("");u.exports.useEffect(()=>{Xe().then(m=>{m.status==200?m.json().then(b=>{p(b.results.filter(f=>f.users.length<8)),s("0")}):m.status==401&&(r(k("/")),r(K()),localStorage.removeItem("TOKEN"))})},[]);const g=m=>{s(m.target.value)};return o(q,{open:t.open,onClose:()=>t.handleClose(null),children:[e(B,{children:"Pick a group"}),a?o(I,{children:[e(D,{children:e(R,{value:n,label:"Group",fullWidth:!0,variant:"standard",margin:"dense",onChange:g,children:a.map((m,b)=>o(F,{value:b,children:[m.owner.nickname,"'s Group"]},b))})}),o(U,{children:[e(x,{onClick:()=>t.handleClose(null),children:"Close"}),e(x,{onClick:()=>t.handleClose(a[parseInt(n)]),children:"Confirm"})]})]}):null]})}function ln(t){const r=z(),[a,p]=u.exports.useState({}),[n,s]=u.exports.useState(null),[g,m]=u.exports.useState(null),[b,f]=u.exports.useState("1990-01-01"),[h,y]=u.exports.useState(0),[E,O]=u.exports.useState(!1),[C,w]=u.exports.useState(!1);u.exports.useEffect(()=>{Ye(t.userId).then(l=>{l.status==200?l.json().then(A=>{s(A),f(A.date_of_birth),A.group&&Ce(A.group).then(G=>{G.status==200&&G.json().then(Q=>{m(Q)})})}):l.status==401?(r(k("/")),r(K()),localStorage.removeItem("TOKEN")):l.json().then(A=>{p(A)})})},[]);const d=JSON.parse(ee(l=>l.config.config.HOODIE_SIZES||"[]")),_=JSON.parse(ee(l=>l.config.config.EXTRA_DAYS||"[]")),T=JSON.parse(ee(l=>l.config.config.LODGE_EXTRA_DAYS||"[]")),V=JSON.parse(ee(l=>l.config.config.SPONSOR_PRICE||"[]")),i=JSON.parse(ee(l=>l.config.config.STAFF_DISCOUNT||"[]")),W=()=>{let l=0;if(n&&g&&g.accommodation){l=g.accommodation.prices[g.users.length-1]||0;const A=g.accommodation.is_lodge?T:_;n.email.endsWith("@furcation.org.uk")&&(l-=i);let G=0,Q=0;g.users.map(fe=>{fe.is_early&&(G+=1),fe.is_late&&(Q+=1)}),n.is_early&&(l+=A[G-1]),n.is_late&&(l+=A[Q-1]),n.is_sponsor&&(l+=V),l+=Number(n.adjustments)}return l},c=l=>{n&&(n[l.target.name]=l.target.value,s(N({},n)))},j=()=>{w(!0)},ve=()=>{n&&tn(n).then(l=>{l.status==204&&(t.handleDeleted(n),t.handleClose())})},Z=l=>{n&&(n[l.target.name]=l.target.checked,s(N({},n)))},be=l=>{n&&(n.hoodie_size=l.target.value,s(N({},n)))},ce=l=>{const A=new Date(l),G=A.getFullYear()+"-"+("0"+(A.getMonth()+1)).slice(-2)+"-"+("0"+A.getDate()).slice(-2);f(G),n&&(n.date_of_birth=G)},ye=()=>{if(n){y(1);const l=N({},n);l.phone_number=pe(l.phone_number),l.ice_phone=pe(l.ice_phone),delete l.group,Yt(l).then(A=>{console.log(A.status),A.status==200?A.json().then(G=>{y(2),s(G),f(G.date_of_birth),G.group&&Ce(G.group).then(Q=>{Q.status==200&&Q.json().then(fe=>{m(fe)})})}):A.status==401?(r(k("/")),r(K()),localStorage.removeItem("TOKEN")):A.status==400&&(y(0),A.json().then(G=>{console.log(G),p(G)}))})}},pe=l=>(l=l.replaceAll(" ",""),l.charAt(0)==="0"?"+44"+l.substring(1):l),Se=()=>{O(!0)},v=l=>{n&&l&&(l.users.push({id:n.id,nickname:n.nickname,fully_paid:!1,is_early:!1,is_late:!1}),de(l).then(A=>{A.status==200&&(s($(N({},n),{group:l})),m(l))})),O(!1)};return o(I,{children:[o(q,{open:t.open,onClose:t.handleClose,scroll:"body",children:[e(B,{children:"Attendee "}),n?o(I,{children:[o(D,{children:[o(L,{children:["Badge Number:"," ",n.badge_override?n.badge_override+" (Overridden from "+n.id+")":n.id]}),e(S,{required:!0,name:"full_name",label:"Full (Legal) Name",value:n.full_name,onChange:c,autoComplete:"fullname",error:Object.prototype.hasOwnProperty.call(a,"full_name"),helperText:a.full_name,fullWidth:!0,variant:"standard",margin:"dense"}),e(S,{required:!0,name:"nickname",label:"Badge Name (Nickname/Furry Name)",value:n.nickname,onChange:c,autoComplete:"nickname",error:Object.prototype.hasOwnProperty.call(a,"nickname"),helperText:a.nickname,fullWidth:!0,variant:"standard",margin:"dense"}),e(S,{required:!0,name:"email",label:"Email",value:n.email,onChange:c,autoComplete:"email",error:Object.prototype.hasOwnProperty.call(a,"email"),helperText:a.email,fullWidth:!0,variant:"standard",margin:"dense"}),e(Ke,{dateAdapter:ze,children:e(Me,{label:"Date of Birth",value:b,onChange:ce,inputFormat:"yyyy-MM-dd",mask:"____-__-__",renderInput:l=>e(S,$(N({},l),{required:!0,error:Object.prototype.hasOwnProperty.call(a,"date_of_birth"),helperText:a.date_of_birth,fullWidth:!0,variant:"standard",margin:"dense"}))})}),e(S,{required:!0,multiline:!0,rows:4,name:"address",label:"Address",value:n.address,onChange:c,error:Object.prototype.hasOwnProperty.call(a,"address"),helperText:a.address,fullWidth:!0,variant:"standard",margin:"dense"}),e(S,{required:!0,type:"tel",name:"phone_number",label:"Phone Number",autoComplete:"phone",value:n.phone_number,onChange:c,error:Object.prototype.hasOwnProperty.call(a,"phone_number"),helperText:a.phone_number,fullWidth:!0,variant:"standard",margin:"dense"}),e(S,{multiline:!0,rows:4,name:"medical_details",label:"Any medical details we should know? (optional)",value:n.medical_details||"",onChange:c,error:Object.prototype.hasOwnProperty.call(a,"medical_details"),helperText:a.medical_details,fullWidth:!0,variant:"standard",margin:"dense"}),e(S,{required:!0,name:"ice_name",label:"ICE Name",value:n.ice_name,onChange:c,autoComplete:"ice_name",error:Object.prototype.hasOwnProperty.call(a,"ice_name"),helperText:a.ice_name,fullWidth:!0,variant:"standard",margin:"dense"}),e(S,{required:!0,name:"ice_phone",label:"ICE Phone",value:n.ice_phone,onChange:c,autoComplete:"ice_phone",error:Object.prototype.hasOwnProperty.call(a,"ice_phone"),helperText:a.ice_phone,fullWidth:!0,variant:"standard",margin:"dense"}),e(ae,{control:e(re,{name:"is_fursuiter",checked:n.is_fursuiter,onChange:Z}),label:"Fursuiter"}),e(ae,{control:e(re,{name:"is_early",checked:n.is_early,onChange:Z}),label:"Early"}),e(ae,{control:e(re,{name:"is_late",checked:n.is_late,onChange:Z}),label:"Late"}),e(ae,{control:e(re,{name:"is_sponsor",checked:n.is_sponsor,onChange:Z}),label:"Sponsor"}),e(H,{shrink:!0,children:"Hoodie Size"}),e(R,{value:n.hoodie_size,fullWidth:!0,variant:"standard",margin:"dense",label:"Hoodie Size",onChange:be,children:d.map(l=>e(F,{value:l,children:e(le,{color:"text.primary",children:l})},l))}),e(S,{name:"badge_override",label:"Badge Number Override",value:n.badge_override,onChange:c,autoComplete:"badge_override",error:Object.prototype.hasOwnProperty.call(a,"badge_override"),helperText:a.badge_override,fullWidth:!0,variant:"standard",margin:"dense"}),e(S,{name:"paid",label:"Amount paid",value:n.paid,onChange:c,autoComplete:"paid",type:"number",error:Object.prototype.hasOwnProperty.call(a,"paid"),InputProps:{endAdornment:e(ke,{position:"end",children:"p"})},helperText:a.paid,fullWidth:!0,variant:"standard",margin:"dense"}),e(S,{name:"adjustments",label:"Bill adjustments",value:n.adjustments,onChange:c,autoComplete:"adjustments",type:"number",error:Object.prototype.hasOwnProperty.call(a,"adjustments"),InputProps:{endAdornment:e(ke,{position:"end",children:"p"})},helperText:a.adjustments,fullWidth:!0,variant:"standard",margin:"dense"})]}),e(D,{children:o(L,{children:["Total Bill: \xA3",(W()/100).toFixed(2)]})}),e(D,{children:o(L,{children:["Left to pay: \xA3",((W()-n.paid)/100).toFixed(2)]})}),e(D,{children:e(S,{multiline:!0,rows:4,name:"internal_notes",label:"Internal Notes",value:n.internal_notes||"",onChange:c,error:Object.prototype.hasOwnProperty.call(a,"internal_notes"),helperText:a.internal_notes,fullWidth:!0,variant:"standard",margin:"dense"})}),o(D,{children:[g?o(L,{children:["Group:"," ",o(ue,{to:"/groups/"+g.id,children:[g.owner.nickname,"'s Group"]})]}):o(L,{sx:{"& button":{m:1}},children:["No group",e(x,{size:"small",variant:"contained",color:"primary",onClick:Se,children:"Add to a group"})]}),e(ae,{control:e(re,{name:"checked_in",checked:n.checked_in,onChange:Z}),label:"Checked In"})]}),o(U,{children:[e(x,{onClick:t.handleClose,children:"Close"}),e(x,{color:"error",onClick:j,children:"Delete"}),e(wt,{loading:h==1,color:h==2?"success":"primary",onClick:ye,children:h==2?"Saved!":"Save Changes"})]})]}):null]}),E?e(on,{open:!0,handleClose:v}):null,o(q,{open:C,onClose:t.handleClose,children:[e(B,{children:"Delete Attendee"}),e(D,{children:e(L,{children:"Are you sure you want to delete this attendee?"})}),o(U,{children:[e(x,{onClick:t.handleClose,children:"Cancel"}),e(x,{onClick:ve,color:"error",variant:"contained",children:"Delete"})]})]})]})}function Qe(t){const r=u.exports.createRef();return e(I,{children:e("a",{role:"button",ref:r,onClick:async()=>{if(r&&r.current&&r.current.href)return;const n=await(await fetch(t.url,{headers:{Authorization:"Token "+localStorage.getItem("TOKEN")}})).blob(),s=window.URL.createObjectURL(n);r&&r.current&&(r.current.download=t.filename,r.current.href=s,r.current.click())},children:t.children})})}function je(){const t=z(),r=["Not Filtered","Yes","No"],{id:a}=_e(),[p,n]=u.exports.useState(""),[s,g]=u.exports.useState({is_early:"Not Filtered",is_late:"Not Filtered",is_sponsor:"Not Filtered",is_active:"Yes",is_staff:"Not Filtered",is_admin:"No",has_accommodation:"Yes",checked_in:"Not Filtered"}),[m,b]=u.exports.useState([]),[f,h]=u.exports.useState("");u.exports.useEffect(()=>{y()},[]);const y=()=>{Je().then(i=>{i.status==200?i.json().then(W=>{b(W.results)}):i.status==401?(t(k("/")),t(K()),localStorage.removeItem("TOKEN")):i.json().then(()=>{n("Error while retrieving attendees.  Please try again or contact tech.")})})},E=i=>{b(m.filter(()=>i.id!==i.id))},O=i=>{t(k("/attendees/"+i.id))},C=()=>{t(k("/attendees")),y()},w=i=>{h(i.target.value)},d=i=>{console.log(i.target.name+": "+i.target.value),s[i.target.name]=i.target.value,g(N({},s))},_=i=>i.toLowerCase().includes(f.toLowerCase()),T=(i,W)=>i==r[0]?!0:i==r[1]?W:!W,V=i=>T(s.is_early,i.is_early)&&T(s.is_late,i.is_late)&&T(s.is_sponsor,i.is_sponsor)&&T(s.is_staff,i.email.endsWith("@furcation.org.uk"))&&T(s.is_active,i.is_active)&&T(s.is_admin,i.is_staff)&&T(s.checked_in,i.checked_in)&&T(s.has_accommodation,i.has_accommodation);return o(I,{children:[p?e(se,{severity:"error",children:p}):null,e(S,{fullWidth:!0,id:"outlined-basic",label:"Search",variant:"outlined",onChange:w}),o(Y,{sx:{width:"20ch",p:{xs:2,md:3}},children:[e(H,{sx:{p:{xs:3,md:4}},children:"Early"}),e(R,{value:s.is_early,label:"Early",name:"is_early",onChange:d,children:r.map(i=>e(F,{value:i,children:i},i))})]}),o(Y,{sx:{width:"20ch",p:{xs:2,md:3}},children:[e(H,{sx:{p:{xs:3,md:4}},children:"Late"}),e(R,{value:s.is_late,label:"Late",name:"is_late",onChange:d,children:r.map(i=>e(F,{value:i,children:i},i))})]}),o(Y,{sx:{width:"20ch",p:{xs:2,md:3}},children:[e(H,{sx:{p:{xs:3,md:4}},children:"Sponsor"}),e(R,{value:s.is_sponsor,label:"Sponsor",name:"is_sponsor",onChange:d,children:r.map(i=>e(F,{value:i,children:i},i))})]}),o(Y,{sx:{width:"20ch",p:{xs:2,md:3}},children:[e(H,{sx:{p:{xs:3,md:4}},children:"Active"}),e(R,{value:s.is_active,label:"Active",name:"is_active",onChange:d,children:r.map(i=>e(F,{value:i,children:i},i))})]}),o(Y,{sx:{width:"20ch",p:{xs:2,md:3}},children:[e(H,{sx:{p:{xs:3,md:4}},children:"Staff"}),e(R,{value:s.is_staff,label:"Staff",name:"is_staff",onChange:d,children:r.map(i=>e(F,{value:i,children:i},i))})]}),o(Y,{sx:{width:"20ch",p:{xs:2,md:3}},children:[e(H,{sx:{p:{xs:3,md:4}},children:"Admin"}),e(R,{value:s.is_admin,label:"Admin",name:"is_admin",onChange:d,children:r.map(i=>e(F,{value:i,children:i},i))})]}),o(Y,{sx:{width:"20ch",p:{xs:2,md:3}},children:[e(H,{sx:{p:{xs:3,md:4}},children:"Accommodation"}),e(R,{value:s.has_accommodation,label:"Accommodation",name:"has_accommodation",onChange:d,children:r.map(i=>e(F,{value:i,children:i},i))})]}),o(Y,{sx:{width:"20ch",p:{xs:2,md:3}},children:[e(H,{sx:{p:{xs:3,md:4}},children:"Checked In"}),e(R,{value:s.checked_in,label:"Checked In",name:"checked_in",onChange:d,children:r.map(i=>e(F,{value:i,children:i},i))})]}),e(Qe,{url:P+"auth/users.csv",filename:"users.csv",children:e(he,{"aria-label":"download",sx:{p:{xs:4,md:5}},children:e(He,{})})}),e(ge,{children:m.filter(i=>(_(i.full_name)||_(i.nickname)||_(i.email)||_(i.id+"")||_(i.badge_override))&&V(i)).map((i,W)=>e(te,{children:o(oe,{onClick:()=>O(i),children:[e(ie,{children:i.badge_image?e(X,{src:"https://storage.googleapis.com/reggie-badges/"+i.badge_image}):e(X,{children:e(qe,{})})}),e(ne,{primary:i.nickname,secondary:i.full_name+" - "+i.email+" - #"+(i.badge_override?i.badge_override+" (Overridden from "+i.id+")":i.id)})]})},W))}),a?e(ln,{open:!0,handleClose:C,userId:a,handleDeleted:E}):null]})}function sn(t){const r=z(),[a,p]=u.exports.useState([]),[n,s]=u.exports.useState("");u.exports.useEffect(()=>{Ve().then(m=>{m.status==200?m.json().then(b=>{p(b.results.filter(f=>f.min_capacity<=t.groupSize&&f.max_capacity>=t.groupSize)),s("0")}):m.status==401&&(r(k("/")),r(K()),localStorage.removeItem("TOKEN"))})},[]);const g=m=>{s(m.target.value)};return o(q,{open:t.open,onClose:()=>t.handleClose(null),children:[e(B,{children:"Pick accommodation"}),a?o(I,{children:[e(D,{children:e(R,{value:n,label:"Accommodation",fullWidth:!0,variant:"standard",margin:"dense",onChange:g,children:a.map((m,b)=>e(F,{value:b,children:m.name},b))})}),o(U,{children:[e(x,{onClick:()=>t.handleClose(null),children:"Close"}),e(x,{onClick:()=>t.handleClose(a[parseInt(n)]),children:"Confirm"})]})]}):null]})}function cn(t){const r=z(),[a,p]=u.exports.useState(null),[n,s]=u.exports.useState(0),[g,m]=u.exports.useState(!1),[b,f]=u.exports.useState(""),[h,y]=u.exports.useState(!1),[E,O]=u.exports.useState(!1),[C,w]=u.exports.useState(!1);u.exports.useEffect(()=>{Ce(t.groupId).then(v=>{v.status==200?v.json().then(l=>{p(l),f(l.internal_notes)}):v.status==401&&(r(k("/")),r(K()),localStorage.removeItem("TOKEN"))})},[]);const d=v=>{s(v)},_=()=>{s(0)},T=()=>{a&&(a.users=a.users.filter(v=>v.id!==n),de(a).then(v=>{v.status==200&&v.json().then(l=>{p(l),s(0)})}))},V=()=>{m(!0)},i=()=>{m(!1)},W=()=>{a&&en(a).then(v=>{v.status==204&&(t.handleDeleted(a),r(k("/groups")))})},c=v=>{a&&nn(a,v).then(l=>{l.json().then(A=>p(A))})},j=v=>{a&&f(v.target.value)},ve=()=>{a&&(a.internal_notes=b,de(a).then(v=>{v.status==200&&v.json().then(l=>{y(!0),p(l),f(l.internal_notes)})}))},Z=v=>{if(v.claimed_at){const l=new Date(v.claimed_at);return Math.round(Math.abs((l.getTime()-new Date().getTime())/864e5))}return 0},be=()=>{w(!0)},ce=()=>{w(!1)},ye=()=>{a&&(a.accommodation=null,de(a).then(v=>{v.status==200&&p(N({},a))}),ce())},pe=()=>{O(!0)},Se=v=>{a&&v&&(a.accommodation=v,de(a).then(l=>{l.status==200&&p($(N({},a),{accommodation:v}))})),O(!1)};return o(I,{children:[o(q,{open:t.open,onClose:t.handleClose,scroll:"body",children:[e(B,{children:"Group"}),a?o(I,{children:[e(D,{children:o(L,{children:["Group ID: ",t.groupId]})}),e(D,{children:o(L,{sx:{"& button":{m:1}},children:["Owner:"," ",e(ue,{to:"/attendees/"+a.owner.id,children:a.owner.nickname+(a.owner.fully_paid?" (Paid)":" (Not paid)")}),e(x,{size:"small",variant:"contained",color:"error",onClick:V,children:"Disband Group"})]})}),a.users.filter(v=>v.id!==a.owner.id).map((v,l)=>e(D,{children:o(L,{sx:{"& button":{m:1}},children:[e(ue,{to:"/attendees/"+v.id,children:v.nickname+(v.fully_paid?" (Paid)":" (Not paid)")}),e(x,{size:"small",variant:"contained",color:"error",onClick:()=>d(v.id),children:"Remove from group"}),e(x,{size:"small",variant:"contained",color:"primary",onClick:()=>c(v.id),children:"Make group owner"})]})},l)),e(D,{children:o(M,{children:[e(S,{multiline:!0,rows:4,name:"internal_notes",label:"Internal Notes",value:b||"",onChange:j,fullWidth:!0,variant:"standard",margin:"dense"}),e(x,{color:h?"success":"primary",onClick:ve,children:h?"Saved!":"Save internal notes"})]})}),o(D,{children:[a.accommodation?o(L,{sx:{"& button":{m:1}},children:["Accommodation:"," ",e(ue,{to:"/accommodation/"+a.accommodation.id,children:a.accommodation.name}),e(x,{size:"small",variant:"contained",color:"error",onClick:be,children:"Remove accommodation"}),e("br",{}),"Claimed ",Z(a)," days ago"]}):o(L,{sx:{"& button":{m:1}},children:["No accommodation",e(x,{size:"small",variant:"contained",color:"primary",onClick:pe,children:"Add accommodation"})]}),e(sn,{open:E,groupSize:a.users.length,handleClose:Se})]}),e(U,{children:e(x,{onClick:t.handleClose,children:"Close"})})]}):null]}),e(q,{open:C,onClose:ce,children:a?o(I,{children:[e(B,{children:"Remove from group"}),e(D,{children:e(L,{children:"Are you sure?"})}),o(U,{children:[e(x,{onClick:ce,children:"Close"}),e(x,{onClick:ye,children:"Remove from group"})]})]}):null}),e(q,{open:!!n,onClose:_,children:a?o(I,{children:[e(B,{children:"Remove from group"}),e(D,{children:e(L,{children:"Are you sure?"})}),o(U,{children:[e(x,{onClick:_,children:"Close"}),e(x,{onClick:T,children:"Remove from group"})]})]}):null}),e(q,{open:g,onClose:i,children:a?o(I,{children:[e(B,{children:"Disband group"}),e(D,{children:e(L,{children:"Are you sure?"})}),o(U,{children:[e(x,{onClick:i,children:"Close"}),e(x,{onClick:W,children:"Disband group"})]})]}):null})]})}function Le(){const t=z(),r=["Not Filtered","Yes","No"],{id:a}=_e(),[p,n]=u.exports.useState(""),[s,g]=u.exports.useState([]),[m,b]=u.exports.useState(""),[f,h]=u.exports.useState({has_accommodation:"Yes",paid:"Not Filtered"});u.exports.useEffect(()=>{Xe().then(c=>{c.status==200?c.json().then(j=>{console.log(j),g(j.results)}):c.status==401?(t(k("/")),t(K()),localStorage.removeItem("TOKEN")):c.json().then(j=>{n("Error while retrieving groups.  Please try again or contact tech."),console.log(j)})})},[]);const y=c=>{t(k("/groups/"+c.id))},E=()=>{t(k("/groups"))},O=c=>{b(c.target.value)},C=c=>c.accommodation&&c.accommodation.name.toLowerCase().includes(m.toLowerCase())||c.owner.nickname.toLowerCase().includes(m.toLowerCase()),w=c=>{for(const j of c.users)if(!j.fully_paid)return!0;return!1},d=c=>{g(s.filter(j=>c.id!==j.id))},_=c=>{if(c.claimed_at){const j=new Date(c.claimed_at);return Math.round(Math.abs((j.getTime()-new Date().getTime())/864e5))}return 0},T=c=>c.accommodation?w(c)?" (Unpaid for "+_(c)+" days)":" (Paid)":"",V=c=>{console.log(c.target.name+": "+c.target.value),f[c.target.name]=c.target.value,h(N({},f))},i=(c,j)=>c==r[0]?!0:c==r[1]?j:!j,W=c=>i(f.has_accommodation,c.accommodation!=null)&&i(f.paid,!w(c));return o(I,{children:[p?e(se,{severity:"error",children:p}):null,e(S,{fullWidth:!0,id:"outlined-basic",label:"Search",variant:"outlined",onChange:O}),o(Y,{sx:{width:"20ch",p:{xs:2,md:3}},children:[e(H,{sx:{p:{xs:3,md:4}},children:"Accommodation"}),e(R,{value:f.has_accommodation,label:"Accommodation",name:"has_accommodation",onChange:V,children:r.map(c=>e(F,{value:c,children:c},c))})]}),o(Y,{sx:{width:"20ch",p:{xs:2,md:3}},children:[e(H,{sx:{p:{xs:3,md:4}},children:"Paid"}),e(R,{value:f.paid,label:"Paid",name:"paid",onChange:V,children:r.map(c=>e(F,{value:c,children:c},c))})]}),e(Qe,{url:P+"groups.csv",filename:"groups.csv",children:e(he,{"aria-label":"download",sx:{p:{xs:4,md:5}},children:e(He,{})})}),e(ge,{children:s.filter(c=>C(c)&&W(c)).map((c,j)=>e(te,{children:o(oe,{onClick:()=>y(c),children:[e(ie,{children:e(X,{children:e(Re,{})})}),e(ne,{primary:c.owner.nickname+"'s group",secondary:c.users.length+" member(s)"+T(c)})]})},j))}),a?e(cn,{open:!0,handleClose:E,groupId:a,handleDeleted:d}):null]})}function dn(){const t=z(),[r,a]=u.exports.useState(""),[p,n]=u.exports.useState([]),[s,g]=u.exports.useState(-1);u.exports.useEffect(()=>{Ze().then(h=>{h.status==200?h.json().then(y=>{n(y.results)}):h.status==401?(t(k("/")),t(K()),localStorage.removeItem("TOKEN")):h.json().then(y=>{a("Error while retrieving config.  Please try again or contact tech."),console.log(y)})})},[]);const m=h=>{p[parseInt(h.target.name)].value=h.target.value,n([...p])},b=h=>{an(p[h]).then(y=>{y.status==200?g(h):y.json().then(E=>{a("Error while retrieving config.  Please try again or contact tech."),console.log(E)})})},f={SIGNUP_MODE:"Current signup page restriction.  Set to 0 for signup closed, 1 for staff-only and 2 for signup open.",RECAPTCHA_MIN_SCORE:"Minimum required ReCAPTCHA assessment score, 0 is fail, 1 is success.  If in doubt, set to 0.3",INTRO_TEXT:"Message displayed on the registration site homepage.",CLAIM_MODE:"Current accommodation claim restriction.  Set to 0 for claim unavailable, 1 for staff-only and 2 for open to all.",SPONSOR_PRICE:"The price to sponsor in pence.",STAFF_DISCOUNT:"The discount staff receive in pence.",LODGE_EXTRA_DAYS:"The price in pence for extra days for lodges as JSON array of 8 prices.  Enter just null for no price.",EXTRA_DAYS:"The price in pence for extra days as JSON array of 8 prices.  Enter just null for no price.",REGISTRATION_EDITS:"Allow users to edit their details.  Set to 0 prevent any changes, 1 to allow changes.",ALLOW_PAYMENTS:"Allow users to make payments.  Set to 0 prevent any payments, 1 to allow payments.",HOODIE_SIZES:"The sizes of hoodie available in a JSON array."};return o(M,{direction:"column",spacing:2,children:[r?e(se,{severity:"error",children:r}):null,p.map((h,y)=>o(M,{direction:"row",alignItems:"center",spacing:2,children:[e(le,{children:h.id}),e(S,{name:""+y,label:"Value",multiline:!0,maxRows:4,value:h.value,onChange:m}),e(le,{width:400,children:f[h.id]}),e(x,{variant:"contained",color:s==y?"success":"primary",onClick:()=>b(y),children:s==y?"Saved!":"Save"})]},y))]})}function un(t){const r=z(),[a,p]=u.exports.useState(!1),[n,s]=u.exports.useState(),g=Be.createRef();u.exports.useEffect(()=>{t.isNew?s({id:crypto.randomUUID(),name:"",min_capacity:1,max_capacity:2,availability:0,prices:[null,null,null,null,null,null,null,null],is_lodge:!1,internal_notes:""}):Vt(t.accommodationId).then(d=>{d.status==200?d.json().then(_=>{s(_)}):d.status==401&&(r(k("/")),r(K()),localStorage.removeItem("TOKEN"))})},[]);const m=d=>{n&&s($(N({},n),{[d.target.name]:d.target.value}))},b=d=>{if(n){const _=[...n.prices];for(let T=0;T<8;T++)(T+1<n.min_capacity||T+1>n.max_capacity)&&(_[T]=null);s($(N({},n),{prices:_,[d.target.name]:d.target.value}))}},f=d=>{n&&s($(N({},n),{[d.target.name]:d.target.checked}))},h=d=>{if(n){const _=parseInt(d.target.name.substring(d.target.name.indexOf("_")+1)),T=[...n.prices];T[_-1]=parseInt(d.target.value),s($(N({},n),{prices:T}))}},y=()=>{p(!0)},E=()=>{p(!1)},O=()=>{n&&Zt(n).then(d=>{d.status==204&&(t.handleDeleted(n),r(k("/accommodation")))})},C=()=>{n&&g.current&&g.current.reportValidity()&&(t.isNew?Xt(n):Qt(n)).then(_=>{(_.status==200||_.status==201)&&(t.handleUpdated(),r(k("/accommodation")))})},w=()=>{n&&n.id&&navigator.clipboard.writeText(n.id)};return o(I,{children:[o(q,{open:t.open,onClose:t.handleClose,scroll:"body",children:[o(M,{direction:"row",alignItems:"center",minWidth:"558px",children:[o(B,{children:[t.isNew?"Create ":null,"Accommodation"]}),n&&!t.isNew?o(L,{children:["ID: ",n.id,e(kt,{title:"Copy",children:e(he,{"aria-label":"copy",onClick:w,children:e(At,{})})})]}):null]}),n?o(I,{children:[e(D,{children:o(M,{component:"form",ref:g,spacing:2,children:[e(S,{name:"name",onChange:m,label:"Accommodation Name",value:n.name,required:!0}),e(ae,{control:e(re,{name:"is_lodge",checked:n.is_lodge,onChange:f}),label:"Is lodge?"}),o(M,{direction:"row",spacing:2,alignItems:"center",justifyContent:"left",children:[e(S,{fullWidth:!0,required:!0,name:"min_capacity",onChange:b,label:"Minimum Occupancy",type:"number",inputProps:{inputMode:"numeric",pattern:"[0-9]*",min:1,max:8},value:n.min_capacity}),e(S,{fullWidth:!0,required:!0,name:"max_capacity",onChange:b,label:"Maximum Occupancy",type:"number",inputProps:{inputMode:"numeric",pattern:"[0-9]*",min:1,max:8},value:n.max_capacity}),e(S,{fullWidth:!0,required:!0,name:"availability",onChange:m,label:"Availability",type:"number",inputProps:{inputMode:"numeric",pattern:"[0-9]*"},value:n.availability})]}),e(M,{direction:"row",children:e(Ne,{container:!0,spacing:2,children:n.prices.map((d,_)=>_+1>=(n.min_capacity||1)&&_+1<=(n.max_capacity||8)&&_+1>=1&&_+1<=8?e(Ne,{item:!0,xs:6,children:e(S,{fullWidth:!0,required:!0,label:"Price for "+(_+1),name:"price_"+(_+1),value:d||"",onChange:h,type:"number",InputProps:{endAdornment:e(ke,{position:"end",children:"p"})}})},_):null)})}),e(S,{fullWidth:!0,name:"internal_notes",onChange:m,label:"Internal Notes",value:n.internal_notes,multiline:!0})]})}),o(U,{children:[t.isNew?e(I,{children:e(x,{onClick:C,children:"Create"})}):o(I,{children:[e(x,{onClick:C,children:"Save"}),e(x,{color:"error",onClick:y,children:"Delete"})]}),e(x,{onClick:t.handleClose,children:"Close"})]})]}):null]}),e(q,{open:a,onClose:E,children:n&&!t.isNew?o(I,{children:[e(B,{children:"Delete Accommodation"}),e(D,{children:e(L,{children:"Are you sure?"})}),o(U,{children:[e(x,{onClick:E,children:"Close"}),e(x,{onClick:O,children:"Delete"})]})]}):null})]})}function Ge(){const t=z(),{id:r}=_e(),[a,p]=u.exports.useState(""),[n,s]=u.exports.useState([]),[g,m]=u.exports.useState("");u.exports.useEffect(()=>{b()},[]);const b=()=>{Ve().then(d=>{d.status==200?d.json().then(_=>{s(_.results)}):d.status==401?(t(k("/")),t(K()),localStorage.removeItem("TOKEN")):d.json().then(_=>{p("Error while retrieving groups.  Please try again or contact tech."),console.log(_)})})},f=d=>{t(k("/accommodation/"+d.id))},h=()=>{t(k("/accommodation/new"))},y=()=>{t(k("/accommodation"))},E=d=>{m(d.target.value)},O=d=>d.toLowerCase().includes(g.toLowerCase()),C=d=>{s(n.filter(_=>d.id!==_.id))},w=()=>{b()};return o(I,{children:[a?e(se,{severity:"error",children:a}):null,e(S,{fullWidth:!0,id:"outlined-basic",label:"Search",variant:"outlined",onChange:E}),o(ge,{children:[e(te,{children:o(oe,{onClick:()=>h(),children:[e(ie,{children:e(X,{children:e(De,{})})}),e(ne,{primary:"Create New"})]})}),n.filter(d=>O(d.name)).map((d,_)=>e(te,{children:o(oe,{onClick:()=>f(d),children:[e(ie,{children:e(X,{children:e(we,{})})}),e(ne,{primary:d.name,secondary:o(M,{direction:"row",spacing:4,alignItems:"center",justifyContent:"left",children:[o(M,{direction:"row",spacing:1,alignItems:"center",children:[e(Tt,{}),o("span",{children:[d.min_capacity,"-",d.max_capacity]})]}),o(M,{direction:"row",spacing:1,alignItems:"center",children:[e(we,{}),e("span",{children:d.availability+" ("+(d.availability-d.occupied)+" remaining)"})]})]})})]})},_)),e(te,{children:o(oe,{onClick:()=>h(),children:[e(ie,{children:e(X,{children:e(De,{})})}),e(ne,{primary:"Create New"})]})})]}),r?e(un,{open:!0,handleClose:y,accommodationId:r,handleDeleted:C,handleUpdated:w,isNew:r=="new"}):null]})}function hn(t){const r=z(),[a,p]=u.exports.useState(null),[n,s]=u.exports.useState(null),[g,m]=u.exports.useState("1990-01-01"),[b]=u.exports.useState(localStorage.getItem("ROLE"));return u.exports.useEffect(()=>{Ye(t.userId).then(f=>{f.status==200?f.json().then(h=>{p(h),m(h.date_of_birth),h.group&&Ce(h.group).then(y=>{y.status==200&&y.json().then(E=>{s(E)})})}):f.status==401&&(r(k("/")),r(K()),localStorage.removeItem("TOKEN"))})},[t.userId]),e(I,{children:o(q,{open:t.open,onClose:t.handleClose,scroll:"body",children:[e(B,{children:"Attendee "}),a?o(I,{children:[o(D,{children:[o(L,{children:["Badge Number:"," ",a.badge_override?a.badge_override:a.id]}),e(S,{required:!0,disabled:!0,name:"full_name",label:"Full (Legal) Name",value:a.full_name,fullWidth:!0,variant:"standard",margin:"dense"}),e(S,{required:!0,disabled:!0,name:"nickname",label:"Badge Name (Nickname/Furry Name)",value:a.nickname,fullWidth:!0,variant:"standard",margin:"dense"}),e(S,{required:!0,disabled:!0,name:"email",label:"Email",value:a.email,fullWidth:!0,variant:"standard",margin:"dense"}),e(Ke,{dateAdapter:ze,children:e(Me,{disabled:!0,label:"Date of Birth",value:g,onChange:console.log,inputFormat:"yyyy-MM-dd",mask:"____-__-__",renderInput:f=>e(S,$(N({},f),{required:!0,disabled:!0,fullWidth:!0,variant:"standard",margin:"dense"}))})}),e(S,{required:!0,disabled:!0,multiline:!0,rows:4,name:"address",label:"Address",value:a.address,fullWidth:!0,variant:"standard",margin:"dense"}),e(S,{required:!0,disabled:!0,type:"tel",name:"phone_number",label:"Phone Number",autoComplete:"phone",value:a.phone_number,fullWidth:!0,variant:"standard",margin:"dense"}),b=="medical"?e(S,{multiline:!0,disabled:!0,rows:4,name:"medical_details",label:"Any medical details we should know? (optional)",value:a.medical_details||"",fullWidth:!0,variant:"standard",margin:"dense"}):null,e(S,{required:!0,disabled:!0,name:"ice_name",label:"ICE Name",value:a.ice_name,autoComplete:"ice_name",fullWidth:!0,variant:"standard",margin:"dense"}),e(S,{required:!0,disabled:!0,name:"ice_phone",label:"ICE Phone",value:a.ice_phone,autoComplete:"ice_phone",fullWidth:!0,variant:"standard",margin:"dense"})]}),e(D,{children:n?o(L,{children:["Group members: ",e("br",{}),n.users.map((f,h)=>o(ue,{to:"/welfare/"+f.id,children:[f.nickname," ",e("br",{})]},h))]}):null}),e(U,{children:e(x,{onClick:t.handleClose,children:"Close"})})]}):null]})})}function We(){const t=z(),{id:r}=_e(),[a,p]=u.exports.useState(""),[n,s]=u.exports.useState([]),[g,m]=u.exports.useState("");u.exports.useEffect(()=>{b()},[]);const b=()=>{Je().then(C=>{C.status==200?C.json().then(w=>{s(w.results)}):C.status==401?(t(k("/")),t(K()),localStorage.removeItem("TOKEN")):C.json().then(()=>{p("Error while retrieving attendees.  Please try again or contact tech.")})})},f=C=>{s(n.filter(()=>C.id!==C.id))},h=C=>{t(k("/welfare/"+C.id))},y=()=>{t(k("/welfare")),b()},E=C=>{m(C.target.value)},O=C=>C.toLowerCase().includes(g.toLowerCase());return o(I,{children:[a?e(se,{severity:"error",children:a}):null,e(S,{fullWidth:!0,id:"outlined-basic",label:"Search",variant:"outlined",onChange:E}),e(ge,{children:n.filter(C=>(O(C.full_name)||O(C.nickname)||O(C.email)||O(C.id+"")||O(C.badge_override))&&C.checked_in).map((C,w)=>e(te,{children:o(oe,{onClick:()=>h(C),children:[e(ie,{children:C.badge_image?e(X,{src:"https://storage.googleapis.com/reggie-badges/"+C.badge_image}):e(X,{children:e(qe,{})})}),e(ne,{primary:C.nickname,secondary:C.full_name+" - #"+(C.badge_override?C.badge_override:C.id)})]})},w))}),r?e(hn,{open:!0,handleClose:y,userId:r,handleDeleted:f}):null]})}It.render(e(Be.StrictMode,{children:e(Ot,{store:Te,children:e(Lt,{children:e(Et,{history:Bt,children:o(Nt,{children:[e(J,{path:"/",element:e(rn,{})}),e(J,{path:"/accommodation",element:e(Ge,{})}),e(J,{path:"/accommodation/:id",element:e(Ge,{})}),e(J,{path:"/attendees",element:e(je,{})}),e(J,{path:"/attendees/:id",element:e(je,{})}),e(J,{path:"/groups",element:e(Le,{})}),e(J,{path:"/groups/:id",element:e(Le,{})}),e(J,{path:"/config",element:e(dn,{})}),e(J,{path:"/welfare",element:e(We,{})}),e(J,{path:"/welfare/:id",element:e(We,{})})]})})})})}),document.getElementById("root"));Ze().then(t=>{t.status==200&&t.json().then(r=>{const a={};r.results.map(p=>{a[p.id]=p.value}),Te.dispatch(Kt(a))})});
